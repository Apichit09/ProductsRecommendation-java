
## ภาพรวมของโปรแกรม

1. **การสมัครสมาชิกและล็อกอิน**: ผู้ใช้สามารถสร้างบัญชีใหม่และเข้าสู่ระบบเพื่อเข้าถึงฟีเจอร์ต่างๆ ของระบบ
2. **การแสดงรายการสินค้า**: แสดงสินค้าทั้งหมดพร้อมรายละเอียดและรูปภาพหลัก
3. **การดูรายละเอียดสินค้า**: ผู้ใช้สามารถเลือกดูรายละเอียดสินค้าที่ต้องการได้
4. **การบันทึกประวัติการเข้าชมสินค้า**: ระบบบันทึกข้อมูลการเข้าชมสินค้าของผู้ใช้เพื่อใช้ในการแนะนำสินค้าในอนาคต
5. **การแนะนำสินค้า**: ระบบแนะนำสินค้าที่เหมาะสมกับผู้ใช้ตามประวัติการเข้าชมสินค้าในอดีต
6. **การดูประวัติการเข้าชมสินค้า**: ผู้ใช้สามารถดูประวัติการเข้าชมสินค้าที่เคยดูได้

จัดโครงสร้างเป็นหลายแพ็กเกจเพื่อความเป็นระเบียบและง่ายต่อการดูแลรักษา ดังนี้ :

- **models**: เก็บคลาสโมเดลที่แทนข้อมูลต่างๆ ในระบบ
- **database**: เก็บคลาสที่เกี่ยวข้องกับการเชื่อมต่อและการเข้าถึงฐานข้อมูล
- **screens**: เก็บคลาสหน้าจอสำหรับการแสดงผลและการโต้ตอบกับผู้ใช้
- **utils**: เก็บคลาสช่วยเหลือ เช่น การจัดการเซสชันและการใช้สีในการแสดงผล

## โครงสร้างข้อมูลที่ใช้ในโปรแกรม

ใช้โครงสร้างข้อมูลหลากหลายประเภทเพื่อจัดการข้อมูลผู้ใช้ สินค้า และประวัติการเข้าชมสินค้าอย่างมีประสิทธิภาพ ดังนี้ :

### 1. **HashMap**

- **`userVisitHistory`** (`Map<Integer, List<Integer>>`):
  - **วัตถุประสงค์**: เก็บข้อมูลการเข้าชมสินค้าของผู้ใช้แต่ละคน
  - **โครงสร้าง**:
    - **Key**: รหัสผู้ใช้ (`userId`)
    - **Value**: รายการของรหัสสินค้า (`productId`) ที่ผู้ใช้ได้เข้าชม
  - **การใช้งาน**:
    - เพิ่มการเข้าชมสินค้าใหม่สำหรับผู้ใช้
    - ดึงประวัติการเข้าชมสินค้าเมื่อผู้ใช้ต้องการคำแนะนำ

- **`products`** (`Map<Integer, Product>`):
  - **วัตถุประสงค์**: เก็บข้อมูลสินค้าทั้งหมด
  - **โครงสร้าง**:
    - **Key**: รหัสสินค้า (`productId`)
    - **Value**: ออบเจ็กต์ `Product` ที่แทนข้อมูลสินค้า
  - **การใช้งาน**:
    - เก็บและเข้าถึงข้อมูลสินค้าอย่างรวดเร็วโดยใช้รหัสสินค้า

- **`productPopularity`** (`Map<Integer, Integer>`):
  - **วัตถุประสงค์**: เก็บความนิยมของสินค้า
  - **โครงสร้าง**:
    - **Key**: รหัสสินค้า (`productId`)
    - **Value**: จำนวนครั้งที่สินค้านั้นถูกเข้าชม
  - **การใช้งาน**:
    - เพิ่มความนิยมเมื่อมีการเข้าชมสินค้า
    - ใช้ในการเรียงลำดับสินค้ายอดนิยมสำหรับการแนะนำ

### 2. **ArrayList**

- ใช้สำหรับเก็บรายการ `productId` ที่ผู้ใช้ได้เข้าชมใน `userVisitHistory`
- **วัตถุประสงค์**: เก็บข้อมูลเป็นลำดับและสามารถเข้าถึงข้อมูลตามตำแหน่งได้
- **การใช้งาน**:
  - เพิ่มการเข้าชมสินค้าใหม่เข้าไปในลิสต์ของผู้ใช้
  - ใช้ในการประมวลผลและแนะนำสินค้าตามประวัติการเข้าชม

### 3. **Set**

- ใช้ในฟังก์ชันการแนะนำสินค้าเพื่อเก็บ `categoryId` ที่ผู้ใช้เคยเข้าชม
- **วัตถุประสงค์**: เก็บข้อมูลที่ไม่ซ้ำกันเพื่อหลีกเลี่ยงการแนะนำสินค้าที่อยู่ในหมวดหมู่เดียวกันซ้ำหลายครั้ง
- **การใช้งาน**:
  - เก็บหมวดหมู่ที่ผู้ใช้สนใจเพื่อใช้ในการแนะนำสินค้าในหมวดหมู่ที่เกี่ยวข้อง

### 4. **Stream API**

- ใช้สำหรับการกรองและเรียงลำดับสินค้าตามความนิยม
- **วัตถุประสงค์**: ทำให้โค้ดสะอาดและอ่านง่ายขึ้นเมื่อทำการประมวลผลข้อมูล
- **การใช้งาน**:
  - กรองสินค้าตามหมวดหมู่ที่ผู้ใช้เคยเข้าชม
  - เรียงลำดับสินค้าตามความนิยมเพื่อนำเสนอในระบบแนะนำ

## โมเดลข้อมูล (`models`)

มีคลาสโมเดลหลักๆ ที่ใช้ในการแทนข้อมูลต่างๆ ในระบบ ซึ่งแต่ละคลาสมีโครงสร้างข้อมูลที่เฉพาะเจาะจงเพื่อรองรับฟีเจอร์ต่างๆ ของโปรแกรม :

- **`User`**:
  - **ข้อมูล**: รหัสผู้ใช้ (`userId`), ชื่อผู้ใช้ (`username`), อีเมล (`email`), รหัสผ่าน (`password`)
  - **การใช้งาน**: ใช้ในการจัดการการสมัครสมาชิกและการล็อกอิน

- **`Product`**:
  - **ข้อมูล**: รหัสสินค้า (`productId`), ชื่อสินค้า (`name`), รายละเอียด (`description`), ราคา (`price`), รหัสหมวดหมู่ (`categoryId`), ชื่อหมวดหมู่ (`categoryName`), ลิงก์รูปภาพหลัก (`imageUrl`)
  - **การใช้งาน**: ใช้ในการแสดงรายการสินค้าและรายละเอียดสินค้า

- **`ProductImage`**:
  - **ข้อมูล**: รหัสรูปภาพ (`imageId`), รหัสสินค้า (`productId`), ลิงก์รูปภาพ (`imageUrl`), สถานะหลัก (`isPrimary`)
  - **การใช้งาน**: ใช้ในการจัดการรูปภาพสินค้าหลักและรูปภาพเพิ่มเติม

- **`VisitHistory`**:
  - **ข้อมูล**: รหัสการเข้าชม (`viewId`), รหัสผู้ใช้ (`userId`), รหัสสินค้า (`productId`), เวลาที่เข้าชม (`viewedAt`)
  - **การใช้งาน**: ใช้ในการบันทึกและแสดงประวัติการเข้าชมสินค้าของผู้ใช้

- **`ProductRecommendation`**:
  - **ข้อมูล**: ใช้ `HashMap` และโครงสร้างข้อมูลอื่นๆ เพื่อจัดการระบบแนะนำสินค้า
  - **การใช้งาน**: จัดการระบบแนะนำสินค้าโดยใช้ข้อมูลจาก `userVisitHistory`, `products`, และ `productPopularity`

## Data Access Objects (DAOs) (`database`)

DAOs เป็นชั้นกลางที่เชื่อมต่อระหว่างโปรแกรมและฐานข้อมูล ช่วยให้การเข้าถึงข้อมูลเป็นระเบียบและปลอดภัย ผ่านการใช้งาน **Data Access Objects (DAOs)** ดังนี้ :

- **`DatabaseConnector`**:
  - **วัตถุประสงค์**: จัดการการเชื่อมต่อกับฐานข้อมูล MySQL โดยใช้ JDBC
  - **การใช้งาน**: ให้บริการการสร้างการเชื่อมต่อที่ปลอดภัยและมีประสิทธิภาพ ทำให้ DAOs สามารถเข้าถึงฐานข้อมูลได้อย่างง่ายดาย

- **`UserDAO`**:
  - **วัตถุประสงค์**: จัดการการเข้าถึงข้อมูลผู้ใช้ในฐานข้อมูล
  - **ฟังก์ชันหลัก**:
    - **`registerUser`**: บันทึกข้อมูลผู้ใช้ใหม่ลงในตาราง `Users`
    - **`loginUser`**: ตรวจสอบความถูกต้องของข้อมูลผู้ใช้กับตาราง `Users`

- **`ProductDAO`**:
  - **วัตถุประสงค์**: จัดการการดึงข้อมูลสินค้าจากฐานข้อมูล
  - **ฟังก์ชันหลัก**:
    - **`getAllProducts`**: ดึงข้อมูลสินค้าทั้งหมดจากตาราง `Products`, `Categories`, และ `ProductImages`
    - **`getProductById`**: ดึงรายละเอียดสินค้าตาม `productId`

- **`ProductViewDAO`**:
  - **วัตถุประสงค์**: จัดการการบันทึกและดึงข้อมูลประวัติการเข้าชมสินค้า
  - **ฟังก์ชันหลัก**:
    - **`saveVisitHistory`**: บันทึกข้อมูลการเข้าชมสินค้าใหม่ลงในตาราง `ProductViews`
    - **`getVisitedProductIds`**: ดึงรหัสสินค้าที่ผู้ใช้ได้เข้าชมจากตาราง `ProductViews`
    - **`getVisitHistories`**: ดึงข้อมูลการเข้าชมสินค้าของผู้ใช้จากตาราง `ProductViews`

- **`ProductRecommendationDAO`**:
  - **วัตถุประสงค์**: จัดการระบบแนะนำสินค้า
  - **ฟังก์ชันหลัก**:
    - **`updateRecommendations`**: ดึงประวัติการเข้าชมสินค้าของผู้ใช้และอัปเดตระบบแนะนำสินค้า
    - **`getRecommendedProducts`**: สร้างและคืนค่ารายการสินค้าที่แนะนำสำหรับผู้ใช้
    - **`addNewVisit`**: บันทึกการเข้าชมสินค้าใหม่และอัปเดตคำแนะนำทันที

## ส่วนติดต่อผู้ใช้ (GUI) (`screens`)

โปรแกรมใช้ **Java Swing** ในการสร้างหน้าจอ GUI สำหรับผู้ใช้ เพื่อให้การใช้งานเป็นมิตรและเข้าใจง่าย โดยมีหน้าจอหลักๆ ดังนี้:

- **`App`**:
  - **หน้าที่**: เป็นจุดเริ่มต้นของโปรแกรม เปิดหน้าจอหลักให้ผู้ใช้เลือกเข้าสู่ระบบ สมัครสมาชิก หรือออกจากโปรแกรม

- **`LoginScreenGUI`**:
  - **หน้าที่**: จัดการหน้าจอเข้าสู่ระบบ ให้ผู้ใช้กรอกชื่อผู้ใช้และรหัสผ่าน จากนั้นตรวจสอบข้อมูลกับฐานข้อมูล
  - **การใช้งาน**: ใช้ `UserDAO` เพื่อยืนยันตัวตนผู้ใช้ และจัดการเซสชันผ่าน `Session`

- **`RegisterScreenGUI`**:
  - **หน้าที่**: จัดการหน้าจอสมัครสมาชิก ให้ผู้ใช้กรอกข้อมูลพื้นฐาน เช่น ชื่อผู้ใช้ อีเมล และรหัสผ่าน แล้วบันทึกลงฐานข้อมูล
  - **การใช้งาน**: ใช้ `UserDAO` เพื่อบันทึกข้อมูลผู้ใช้ใหม่

- **`MainScreenGUI`**:
  - **หน้าที่**: หน้าจอหลักหลังจากผู้ใช้ล็อกอิน สำรวจสินค้าทั้งหมดและให้เลือกดูรายละเอียดสินค้า, ดูคำแนะนำ, ดูประวัติการเข้าชม, หรือออกจากระบบ
  - **การใช้งาน**: ใช้ `ProductDAO` เพื่อดึงข้อมูลสินค้าทั้งหมดและแสดงในตาราง

- **`ProductDetailScreenGUI`**:
  - **หน้าที่**: แสดงรายละเอียดของสินค้าที่เลือกดู และบันทึกการเข้าชมสินค้านั้นลงฐานข้อมูล
  - **การใช้งาน**: ใช้ `ProductDAO` และ `ProductViewDAO` เพื่อดึงข้อมูลสินค้าและบันทึกการเข้าชม

- **`RecommendationScreenGUI`**:
  - **หน้าที่**: แสดงสินค้าที่แนะนำให้กับผู้ใช้ตามประวัติการเข้าชมที่ผ่านมา
  - **การใช้งาน**: ใช้ `ProductRecommendationDAO` เพื่อดึงรายการสินค้าที่แนะนำและแสดงในตาราง

- **`VisitHistoryScreenGUI`**:
  - **หน้าที่**: แสดงประวัติการเข้าชมสินค้าของผู้ใช้
  - **การใช้งาน**: ใช้ `ProductViewDAO` เพื่อดึงรายละเอียดการเข้าชมสินค้าของผู้ใช้และแสดงในตาราง

## Utilities (`utils`)

Utilities เป็นคลาสที่ช่วยในการทำงานต่างๆ เช่น การเชื่อมต่อกับฐานข้อมูลและการจัดการเซสชัน:

- **`Session`**:
  - **หน้าที่**: จัดการเซสชันผู้ใช้ที่ล็อกอินอยู่ในปัจจุบัน
  - **ฟังก์ชันหลัก**:
    - **`setCurrentUser`**: ตั้งค่าออบเจ็กต์ `User` ที่เป็นผู้ใช้ปัจจุบันที่ล็อกอิน
    - **`getCurrentUser`**: ดึงข้อมูลผู้ใช้ที่ล็อกอินอยู่ในปัจจุบัน
    - **`isLoggedIn`**: ตรวจสอบว่าผู้ใช้ได้เข้าสู่ระบบแล้วหรือยัง
    - **`clear`**: ล้างข้อมูลเซสชันเมื่อผู้ใช้ออกจากระบบ

- **`ConsoleColor`**:
  - **หน้าที่**: ใช้สำหรับเพิ่มสีสันในการแสดงผลข้อความในคอนโซล เช่น สีแดงสำหรับข้อความแสดงข้อผิดพลาด สีเขียวสำหรับข้อความที่สำเร็จ เป็นต้น

## การทำงานของระบบแนะนำสินค้า

ระบบแนะนำสินค้าของโปรแกรมถูกออกแบบมาให้แนะนำสินค้าที่เหมาะสมกับแต่ละผู้ใช้โดยพิจารณาจากประวัติการเข้าชมสินค้าในอดีตของพวกเขา การทำงานของระบบแนะนำสินค้านี้ประกอบด้วยขั้นตอนหลักๆ ดังนี้ :

### 1. การบันทึกการเข้าชมสินค้า

- เมื่อผู้ใช้ดูรายละเอียดสินค้าใน `ProductDetailScreenGUI`
- ระบบจะบันทึกการเข้าชมสินค้านั้นลงในฐานข้อมูลผ่าน `ProductViewDAO`
- ระบบจะอัปเดตความนิยมของสินค้านั้นใน `ProductRecommendation`

### 2. การสร้างคำแนะนำสินค้า

- ระบบจะโหลดข้อมูลสินค้าทั้งหมดจาก `ProductDAO` และเพิ่มลงใน `ProductRecommendation`
- ระบบจะโหลดประวัติการเข้าชมสินค้าของผู้ใช้จาก `ProductViewDAO`
- ระบบจะวิเคราะห์หมวดหมู่ที่ผู้ใช้สนใจจากประวัติการเข้าชม
- ระบบจะแนะนำสินค้าที่อยู่ในหมวดหมู่ที่ผู้ใช้เคยสนใจและมีความนิยมสูง โดยไม่แนะนำสินค้าที่ผู้ใช้ได้เข้าชมแล้ว

### 3. การแสดงคำแนะนำสินค้า

- คำแนะนำสินค้าจะถูกแสดงใน `RecommendationScreenGUI` โดยผู้ใช้สามารถรีเฟรชคำแนะนำเพื่อให้ได้ข้อมูลล่าสุด
- ผู้ใช้สามารถดูรายละเอียดสินค้าแนะนำได้ผ่านปุ่ม `ดูรายละเอียดสินค้า`

### 4. การอัปเดตข้อมูลแนะนำ

- เมื่อผู้ใช้ดูรายละเอียดสินค้าใน `ProductDetailScreenGUI`, ระบบจะบันทึกการเข้าชมสินค้าในฐานข้อมูลและเพิ่มข้อมูลการเข้าชมไปยัง `userVisitHistory` และเพิ่มความนิยมของสินค้าใน `productPopularity`

## การจัดการเซสชันผู้ใช้

โปรแกรมใช้คลาส `Session` ในแพ็กเกจ `utils` สำหรับจัดการเซสชันผู้ใช้ ซึ่งประกอบด้วยฟังก์ชันหลักดังนี้:

- **ตั้งค่าเซสชันผู้ใช้ (`setCurrentUser`)**: ตั้งค่าออบเจ็กต์ `User` ที่เป็นผู้ใช้ปัจจุบันที่ล็อกอิน
- **ดึงข้อมูลผู้ใช้ปัจจุบัน (`getCurrentUser`)**: ดึงข้อมูลผู้ใช้ที่ล็อกอินอยู่ในปัจจุบัน
- **ตรวจสอบสถานะการล็อกอิน (`isLoggedIn`)**: ตรวจสอบว่าผู้ใช้ได้เข้าสู่ระบบแล้วหรือยัง
- **ล้างข้อมูลเซสชัน (`clear`)**: ล้างข้อมูลเซสชันเมื่อผู้ใช้ออกจากระบบ

## การจัดการข้อมูลในฐานข้อมูล

โปรแกรมของคุณใช้ฐานข้อมูล MySQL สำหรับเก็บข้อมูลหลักต่างๆ ซึ่งมีตารางหลักดังนี้:

1. **ตาราง `Users`**:
   - เก็บข้อมูลผู้ใช้ เช่น `user_id`, `username`, `email`, `password`

2. **ตาราง `Products`**:
   - เก็บข้อมูลสินค้า เช่น `product_id`, `name`, `description`, `price`, `category_id`

3. **ตาราง `Categories`**:
   - เก็บข้อมูลหมวดหมู่สินค้า เช่น `category_id`, `category_name`

4. **ตาราง `ProductImages`**:
   - เก็บ URL รูปภาพสินค้า เช่น `image_id`, `product_id`, `image_url`, `is_primary`

5. **ตาราง `ProductViews`**:
   - เก็บประวัติการเข้าชมสินค้า เช่น `view_id`, `user_id`, `product_id`, `viewed_at`

## การทำงานร่วมกันของโครงสร้างข้อมูล

โปรแกรมของคุณมีการทำงานร่วมกันของโครงสร้างข้อมูลดังนี้:

1. **การสมัครสมาชิกและการเข้าสู่ระบบ**:
   - ผู้ใช้กรอกข้อมูลใน `RegisterScreenGUI` หรือ `LoginScreenGUI`
   - ข้อมูลถูกส่งไปยัง `UserDAO` เพื่อบันทึกหรือยืนยันการเข้าสู่ระบบ
   - หากเข้าสู่ระบบสำเร็จ ข้อมูลผู้ใช้ถูกเก็บใน `Session` เพื่อใช้ในการแนะนำสินค้าและการเข้าถึงข้อมูลส่วนบุคคล

2. **การแสดงรายการสินค้าและรายละเอียดสินค้า**:
   - `MainScreenGUI` ใช้ `ProductDAO` เพื่อดึงข้อมูลสินค้าทั้งหมดและแสดงในตาราง
   - เมื่อผู้ใช้เลือกดูรายละเอียดสินค้า `ProductDetailScreenGUI` จะใช้ `ProductDAO` เพื่อดึงข้อมูลสินค้านั้นและแสดงในหน้าจอรายละเอียด

3. **การบันทึกการเข้าชมและระบบแนะนำสินค้า**:
   - เมื่อผู้ใช้ดูรายละเอียดสินค้า `ProductDetailScreenGUI` จะเรียกใช้ `ProductRecommendationDAO` เพื่อบันทึกการเข้าชมสินค้านั้นและอัปเดตคำแนะนำสินค้า
   - `ProductRecommendationDAO` ใช้ `ProductViewDAO` เพื่อบันทึกการเข้าชมและดึงข้อมูลประวัติการเข้าชม
   - ระบบแนะนำสินค้าถูกสร้างขึ้นโดยพิจารณาจากข้อมูลใน `ProductRecommendation`

4. **การแสดงคำแนะนำสินค้า**:
   - `RecommendationScreenGUI` ใช้ `ProductRecommendationDAO` เพื่อดึงรายการสินค้าที่แนะนำสำหรับผู้ใช้ปัจจุบัน
   - ข้อมูลสินค้าที่แนะนำถูกแสดงในตารางพร้อมรูปภาพ

5. **การดูประวัติการเข้าชมสินค้า**:
   - `VisitHistoryScreenGUI` ใช้ `ProductViewDAO` เพื่อดึงรายละเอียดการเข้าชมสินค้าของผู้ใช้และแสดงในตารางพร้อมรายละเอียดและรูปภาพ

## ข้อดีของการใช้โครงสร้างข้อมูลนี้

1. **ประสิทธิภาพในการเข้าถึงข้อมูล**:
   - การใช้ `HashMap` ช่วยให้การเข้าถึงข้อมูลรวดเร็วตามกุญแจ (`userId`, `productId`)

2. **การจัดการข้อมูลที่ยืดหยุ่น**:
   - สามารถเพิ่มหรือลบข้อมูลสินค้าและการเข้าชมได้ง่าย
   - ระบบแนะนำสินค้ายืดหยุ่นตามการเปลี่ยนแปลงของข้อมูล

3. **การจัดเก็บข้อมูลที่เป็นระเบียบ**:
   - การแยกคลาสโมเดลและ DAOs ทำให้โค้ดมีความชัดเจนและง่ายต่อการบำรุงรักษา

4. **ความสามารถในการขยายระบบ**:
   - สามารถเพิ่มฟีเจอร์ใหม่ๆ ได้ง่าย เนื่องจากโครงสร้างข้อมูลและโค้ดมีการแยกส่วนอย่างชัดเจน
